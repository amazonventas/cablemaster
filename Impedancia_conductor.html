<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CableMaster</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="icon" href="imagenes/icono.png" type="image/png" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container-fluid pantalla-completa d-flex flex-column">
      <nav class="navbar navbar-expand bg-navbar shadow-sm px-3">
        <div
          class="container-fluid d-flex justify-content-between align-items-center"
        >
          <img src="imagenes/icono.png" class="icono" alt="" />
          <span data-i18n="titulo_impedancia" style="color: white">
            Impedancia (Ω)
          </span>
          <button class="btn btn-navbar-icon ms-2" title="Opciones">
            <span
              style="font-size: 1.5rem; color: white"
              onclick="Mostrar_menu()"
              >⋮</span
            >
          </button>
        </div>
      </nav>

      <!-- Menú lateral -->
      <div id="menuLateral" class="menu-lateral">
        <ul>
          <li>
            <a href="index.html" style="text-decoration: none; color: black">
              <img src="imagenes/flecha-izquierda.png" class="icono" /><span
                data-i18n="inicio"
                >Inicio</span
              >
            </a>
          </li>
          <li>
            <img src="imagenes/idioma.png" class="icono" /><label for="Idioma"
              ><span data-i18n="idioma">Idioma</span></label
            >
            <select id="Idioma" class="form-select" onchange="changeLanguage()">
              <option value="Select_lang" data-i18n="Seleccione_idioma">
                Seleccione
              </option>
              <option value="es" data-i18n="espanol">Español</option>
              <option value="en" data-i18n="ingles">English</option>
            </select>
          </li>
          <li onclick="Page_Acerca_de()">
            <img src="imagenes/acerca.png" class="icono" /><span
              data-i18n="Acerca"
              >Acerca de</span
            >
          </li>
          <li class="link_disabled">
            <img src="imagenes/actualizar.png" class="icono" /><span
              data-i18n="Actualizar"
            >
              Actualizar</span
            >
          </li>
          <!-- <li class="disabled-link" data-i18n="Otras_app">Otras Apps</li>-->
          <li onclick="Mostrar_menu()">
            <img src="imagenes/cerrar.png" class="icono" /><span
              data-i18n="Ocultar"
            >
              Ocultar</span
            >
          </li>
        </ul>
      </div>
      <!-- Fin Menú lateral -->

      <center>
        <div style="width: 80%">
          <br />
          <label for="Unidades_calibre" class="Color_text"
            >Calibre Conductor</label
          >
          <select
            id="Unidades_calibre"
            class="form-select"
            style="text-align: center"
            aria-label="Default select example"
            onchange="Unidades_cable()"
          >
            <option value="AWG" selected>AWG</option>
            <option value="MCM">MCM</option>
          </select>
          <div id="Contenedor_AWG">
            <select
              id="AWG"
              class="form-select"
              style="text-align: center"
              aria-label="Default select example"
            >
              <option value="#14" selected>#14</option>
              <option value="#12">#12</option>
              <option value="#10">#10</option>
              <option value="#8">#8</option>
              <option value="#6">#6</option>
              <option value="#4">#4</option>
              <option value="#3">#3</option>
              <option value="#2">#2</option>
              <option value="#1">#1</option>
              <option value="#1/0">#1/0</option>
              <option value="#2/0">#2/0</option>
              <option value="#3/0">#3/0</option>
              <option value="#4/0">#4/0</option>
            </select>
          </div>

          <div id="Contenedor_MCM" style="display: none">
            <label for="MCM" class="Color_text">Conductor MCM</label>
            <select
              id="MCM"
              class="form-select"
              style="text-align: center"
              aria-label="Default select example"
            >
              <option value="250" selected>250</option>
              <option value="300">300</option>
              <option value="350">350</option>
              <option value="400">400</option>
              <option value="500">500</option>
              <option value="600">600</option>
              <option value="700">700</option>
              <option value="750">750</option>
              <option value="800">800</option>
              <option value="900">900</option>
              <option value="1000">1000</option>
            </select>
          </div>
          <br />
          <label for="Material" class="Color_text">Material Conductor</label>
          <select
            id="Material"
            class="form-select"
            style="text-align: center"
            aria-label="Default select example"
          >
            <option value="Cobre" selected>Cobre</option>
            <option value="Aluminio">Aluminio</option>
          </select>
          <br />
          <label for="Aislamiento" class="Color_text"
            >Material Canalizacion</label
          >
          <select
            id="Material_canalizacion"
            class="form-select"
            style="text-align: center"
            aria-label="Default select example"
          >
            <option value="PVC" selected>PVC</option>
            <option value="Aluminio">Aluminio</option>
            <option value="Acero">Acero</option>
          </select>
          <br />
        </div>
        <br /><br />
        <button
          type="button"
          class="btn btn-primary btn-custom"
          onclick="Buscar()"
        >
          Buscar
        </button>

        <!-- Ventana MODAL Resultados -->
        <div id="Resultado_buscar" class="modal">
          <div class="modal-contenido">
            <div class="modal-body">
              <center>
                <label
                  id="Resultado_Calibre"
                  class="Color_text"
                  style="font-weight: 700"
                ></label
                ><br />
                <label
                  id="Resultado_Material"
                  class="Color_text"
                  style="font-weight: 700"
                ></label
                ><br />
                <br />
                <label
                  id="Resultado"
                  style="color: steelblue; font-weight: 750; font-size: 20px"
                ></label>
                <br /><br />
                <label id="Normativa" style="font-size: 12px"></label
                ><br /><br />
                <button class="btn btn-primary" onclick="cerrarModal()">
                  Cerrar
                </button>
              </center>
            </div>
          </div>
        </div>
        <!-- Fin Ventana MODAL Resultados-->
      </center>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const savedLang = localStorage.getItem("lang") || "es";
        changeLanguage(savedLang);
      });

      function changeLanguage(Valor) {
        const idioma = document.getElementById("Idioma").value;
        let lang = "";

        if (Valor) {
          lang = Valor;
        } else {
          if (idioma == "es") {
            lang = "es";
          }
          if (idioma == "en") {
            lang = "en";
          }
        }
        fetch(`idiomas/${lang}.json`)
          .then((response) => response.json())
          .then((translations) => {
            document.querySelectorAll("[data-i18n]").forEach((el) => {
              const key = el.getAttribute("data-i18n");
              if (translations[key]) {
                el.textContent = translations[key];
              }
            });
            // Guarda el idioma en localStorage
            localStorage.setItem("lang", lang);
          });
      }

      function Mostrar_menu() {
        const btnMenu = document.getElementById("btnMenu");
        const menu = document.getElementById("menuLateral");
        if (menu.style.right === "0px") {
          menu.style.right = "-200px"; // ocultar
        } else {
          menu.style.right = "0px"; // mostrar
        }
      }

      function Page_Acerca_de() {
        window.location.href = "Acerca_de.html";
      }

      function Unidades_cable() {
        const Calibre = document.getElementById("Unidades_calibre").value;

        if (Calibre == "AWG") {
          document.getElementById("Contenedor_AWG").style.display = "block";
          document.getElementById("Contenedor_MCM").style.display = "none";
          document.getElementById("Contenedor_mm2").style.display = "none";
        }

        if (Calibre == "MCM") {
          document.getElementById("Contenedor_AWG").style.display = "none";
          document.getElementById("Contenedor_MCM").style.display = "block";
          document.getElementById("Contenedor_mm2").style.display = "none";
        }

        if (Calibre == "mm2") {
          document.getElementById("Contenedor_AWG").style.display = "none";
          document.getElementById("Contenedor_MCM").style.display = "none";
          document.getElementById("Contenedor_mm2").style.display = "block";
        }
      }

      function Buscar() {
        const Unidades_calibre =
          document.getElementById("Unidades_calibre").value;
        const AWG = document.getElementById("AWG").value;
        const MCM = document.getElementById("MCM").value;
        const Material = document.getElementById("Material").value;
        const Tuberia = document.getElementById("Material_canalizacion").value;
        let Calibre;

        if (Unidades_calibre == "AWG") {
          Calibre = AWG;
        }

        if (Unidades_calibre == "MCM") {
          Calibre = MCM;
        }

        fetch("https://electricidad-facil.com/impedancias", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ Calibre, Material, Tuberia }),
        })
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
          })
          .catch((error) => console.error("Error:", error));
      }

      function cerrarModal() {
        document.getElementById("Resultado_buscar").style.display = "none";
      }
    </script>
  </body>
</html>
